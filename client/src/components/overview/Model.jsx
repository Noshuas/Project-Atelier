import React, { createContext, useState, useEffect } from 'react';
import { getProducts, getProductStyles } from './Controllers.js';

export const OverviewContext = createContext();

export function useOverview() {
  // set initial state values (static)
  const [currentProduct, setCurrentProduct] = useState({});
  const [productStyles, setProductStyles] = useState({});

  useEffect(() => {
    Promise.all([getProducts(), getProductStyles()])
      .then(([product, styles]) => {
        setCurrentProduct(product.data);
        setProductStyles(styles.data);
      });
  }, []);

  return {
    currentProduct, setCurrentProduct,
    productStyles, setProductStyles
  };
}